@if (!isLoading()) {
  <app-three-js-container [currentCamera]="camera" [currentScene]="scene">
    <app-game-controller></app-game-controller>
    <app-chess-scene #scene>
      @for (file of board; track $index) {
        @for (square of file; track $index) {
          <app-chess-board-square [square]="square.square" [color]="square.color"></app-chess-board-square>
        }
      }
      @for (piece of pieces; track $index) {
        <app-chess-piece [color]="piece.color" [square]="piece.square" [piece]="piece.type"></app-chess-piece>
      }
      <app-raycast-box [currentCamera]="camera" [currentScene]="scene"></app-raycast-box>
      <app-chess-light></app-chess-light>
    </app-chess-scene>
    <app-chess-camera #camera></app-chess-camera>
    <app-chess-controls [currentCamera]="camera"></app-chess-controls>
  </app-three-js-container>
}